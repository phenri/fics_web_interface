<html>
  <head>
    <script src="//cdn.sockjs.org/sockjs-0.3.4.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>

    <script src="/scripts/angular.js"></script>
    <script src="/scripts/angular-ui-bootstrap_tabs.js"></script>
    <link href="/css/bootstrap.css" rel="stylesheet" />

    <script src="/assets/application.js"></script>
  </head>
  <body ng-app="ficsClient">
    <tabset>
      <tab ng-controller="LoginCtrl" ng-hide="isLoggedIn()">
        <tab-heading>
          log in
        </tab-heading>
        <input type="button" value="login as guest" ng-click="loginAsGuest()" />

        <div>- or -</div>

        <form ng-submit="loginWithCredentials(userData)">
          <input type="text" ng-model="userData.login" placeholder="login" />
          <br>
          <input type="password" ng-model="userData.password" placeholder="password" />
          <br>
          <input type="submit" value="login with credentials" />
        </form>
      </tab>

      <tab ng-controller="ChatCtrl" ng-show="isLoggedIn()">
        <tab-heading>
          chat
        </tab-heading>
        <tabset>
          <tab>
            <tab-heading>
              users
            </tab-heading>
            <ul>
              <li ng-repeat="user in users() | orderBy:user.name">
                {{user.name}} ({{user.rating}})
              </li>
            </ul>
          </tab>
          <tab>
            <tab-heading>
              channels
            </tab-heading>
            <ul>
              <li ng-repeat="channel in channels() | orderBy:parseInt(channel.number, 10)">
                {{channel.number}} {{channel.name}}
              </li>
            </ul>
          </tab>
        </tabset>
      </tab>

      <tab ng-controller="ObservationCtrl" ng-show="isLoggedIn()">
        <tab-heading>
          watch
        </tab-heading>
        <tabset>
          <tab>
            <tab-heading>
              games
            </tab-heading>
            <ul>
              <li ng-repeat="game in games()">
                <a href="#" ng-click="watch(game.number)">
                  {{game.white.name}} ({{game.white.rating}}) vs. {{game.black.name}} ({{game.black.rating}})
                </a>
              </li>
            </ul>
          </tab>

          <tab ng-repeat="game in observations()">
            <tab-heading>
              {{game.white.name}} v. {{game.black.name}}
              <a href="#" ng-click="stopWatching(game.number)">x</a>
            </tab-heading>
            <div>
              {{game.metaData.position}}
            </div>
            <div>
              {{game.metaData.currentMove}}
            </div>
          </tab>
        </tabset>
      </tab>

      <tab ng-controller="ConsoleCtrl">
        <tab-heading>
          console
        </tab-heading>
        <pre>{{output()}}</pre>
    </tabset>
  </body>
</html>
